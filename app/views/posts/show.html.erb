<div class="post">
  <h2><%= @post.user.username %></h2>
  <p><%= @post.body %></p>

  <!-- Likes -->
  <div>
    <p><%= pluralize(@post.likes.count, 'like') %></p>
    <% if @post.likes.exists?(user: current_user) %>
      <%= button_to 'Unlike', post_like_path(@post, @post.likes.find_by(user: current_user)), method: :delete %>
    <% else %>
      <%= button_to 'Like', post_likes_path(@post), method: :post %>
    <% end %>
  </div>

  <!-- Comments -->
  <h3>Comments</h3>
  <ul>
    <% @post.comments.each do |comment| %>
      <li>
        <strong><%= comment.user.username %>:</strong> <%= comment.body %>
      </li>
    <% end %>
  </ul>

  <!-- Add a Comment -->
  <%= form_with model: [@post, @comment], local: true do |form| %>
    <p>
      <%= form.text_area :body, placeholder: 'Add a comment...' %>
    </p>
    <p>
      <%= form.submit 'Comment' %>
    </p>
  <% end %>
</div>
